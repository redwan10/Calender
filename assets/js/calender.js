function init_calendar(e){$(".tbody").empty(),$(".events-container").empty();var t=$(".tbody"),n=e.getMonth(),a=e.getFullYear(),d=days_in_month(n,a),o=$("<tr class='table-row'></tr>"),c=e.getDate();e.setDate(1);for(var i=e.getDay(),s=0;s<35+i;s++){var r=s-i+1;if(s%7==0&&(t.append(o),o=$("<tr class='table-row'></tr>")),s<i||r>d){var v=$("<td class='table-date nil'></td>");o.append(v)}else{v=$("<td class='table-date'>"+r+"</td>");var l=check_events(r,n+1,a);c===r&&0===$(".active-date").length&&(v.addClass("active-date"),show_events(l,months[n],r)),0!==l.length&&v.addClass("event-date"),v.click({events:l,month:months[n],day:r},date_click),o.append(v)}}t.append(o),$(".year").text(a)}function days_in_month(e,t){var n=new Date(t,e,1);return(new Date(t,e+1,1)-n)/864e5}function date_click(e){$(".events-container").show(250),$("#dialog").hide(250),$(".active-date").removeClass("active-date"),$(this).addClass("active-date"),show_events(e.data.events,e.data.month,e.data.day)}function month_click(e){$(".events-container").show(250),$("#dialog").hide(250);var t=e.data.date;$(".active-month").removeClass("active-month"),$(this).addClass("active-month");var n=$(".month").index(this);t.setMonth(n),init_calendar(t)}function next_year(e){$("#dialog").hide(250);var t=e.data.date,n=t.getFullYear()+1;$("year").html(n),t.setFullYear(n),init_calendar(t)}function prev_year(e){$("#dialog").hide(250);var t=e.data.date,n=t.getFullYear()-1;$("year").html(n),t.setFullYear(n),init_calendar(t)}function new_event(e){0!==$(".active-date").length&&($("input").click(function(){$(this).removeClass("error-input")}),$("#dialog input[type=text]").val(""),$("#dialog input[type=number]").val(""),$(".events-container").hide(250),$("#dialog").show(250),$("#cancel-button").click(function(){$("#name").removeClass("error-input"),$("#count").removeClass("error-input"),$("#dialog").hide(250),$(".events-container").show(250)}),$("#ok-button").unbind().click({date:e.data.date},function(){var t=e.data.date,n=$("#name").val().trim(),a=parseInt($("#count").val().trim()),d=parseInt($(".active-date").html());0===n.length?$("#name").addClass("error-input"):isNaN(a)?$("#count").addClass("error-input"):($("#dialog").hide(250),console.log("new event"),new_event_json(n,a,t,d),t.setDate(d),init_calendar(t))}))}function new_event_json(e,t,n,a){var d={occasion:e,invited_count:t,year:n.getFullYear(),month:n.getMonth()+1,day:a};event_data.events.push(d)}function show_events(e,t,n){if($(".events-container").empty(),$(".events-container").show(250),console.log(event_data.events),0===e.length){var a=$("<div class='event-card'></div>"),d=$("<div class='event-name'>There are no events planned for "+t+" "+n+".</div>");$(a).css({"border-left":"10px solid #FF1744"}),$(a).append(d),$(".events-container").append(a)}else for(var o=0;o<e.length;o++){a=$("<div class='event-card'></div>"),d=$("<div class='event-name'>"+e[o].occasion+":</div>");var c=$("<div class='event-count'>"+e[o].invited_count+" Invited</div>");!0===e[o].cancelled&&($(a).css({"border-left":"10px solid #FF1744"}),c=$("<div class='event-cancelled'>Cancelled</div>")),$(a).append(d).append(c),$(".events-container").append(a)}}function check_events(e,t,n){for(var a=[],d=0;d<event_data.events.length;d++){var o=event_data.events[d];o.day===e&&o.month===t&&o.year===n&&a.push(o)}return a}$(document).ready(function(){var e=new Date,t=e.getDate();$(".right-button").click({date:e},next_year),$(".left-button").click({date:e},prev_year),$(".month").click({date:e},month_click),$("#add-button").click({date:e},new_event),$(".months-row").children().eq(e.getMonth()).addClass("active-month"),init_calendar(e),show_events(check_events(t,e.getMonth()+1,e.getFullYear()),months[e.getMonth()],t)});var event_data={events:[{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10,cancelled:!0},{occasion:" Repeated Test Event ",invited_count:120,year:2017,month:5,day:10},{occasion:" Test Event",invited_count:120,year:2017,month:5,day:11}]};const months=["January","February","March","April","May","June","July","August","September","October","November","December"];